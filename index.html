<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaestroBOT - Web Edition</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽµ MaestroBOT</h1>
            <p class="subtitle">Control music with hand gestures</p>
        </header>

        <!-- Video Feed -->
        <div class="video-container">
            <video id="video" autoplay playsinline></video>
            <canvas id="canvas"></canvas>
            <div id="video-overlay">Camera Off</div>
        </div>

        <!-- Camera Toggle -->
        <div class="camera-controls">
            <button id="camera-btn" class="camera-toggle">Start Camera</button>
        </div>

        <!-- Status Display -->
        <div class="status-panel">
            <div class="status-item">
                <label>File:</label>
                <span id="file-status">(none)</span>
            </div>
            <div class="status-item action-status">
                <label>Action:</label>
                <span id="action-status">(waiting)</span>
            </div>
            <div class="status-item state-status">
                <span id="state-status" class="state-stopped">State: stopped | Volume: 60 | Rate: 1.00x</span>
            </div>
        </div>

        <!-- Audio Element -->
        <audio id="audio" preload="auto"></audio>

        <!-- Manual Controls -->
        <div class="controls">
            <button id="load-btn" class="control-btn">Load MP3</button>
            <button id="play-btn" class="control-btn">Play</button>
            <button id="pause-btn" class="control-btn">Pause</button>
            <button id="stop-btn" class="control-btn">Stop</button>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="slider">Slider Controls</button>
            <button class="tab-btn" data-tab="static">Static Gestures</button>
        </div>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Slider Controls Tab -->
            <div id="slider-tab" class="tab-pane active">
                <div class="instructions">
                    <h3>Slider Controls (Hands work independently):</h3>
                    <div class="instruction-grid">
                        <div class="instruction-section">
                            <h4>Playback (Left Hand):</h4>
                            <ul>
                                <li>Open Hand â†’ Play/Resume</li>
                                <li>Closed Fist â†’ Fade to Pause</li>
                            </ul>
                        </div>
                        <div class="instruction-section">
                            <h4>Sliders (Right Hand):</h4>
                            <ul>
                                <li>Open Hand + Move L/R â†’ Speed<br>
                                    <span class="sub-instruction">(Right=Faster, Left=Slower)</span>
                                </li>
                                <li>Closed Fist + Move U/D â†’ Volume<br>
                                    <span class="sub-instruction">(Up=Louder, Down=Quieter)</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Static Gestures Tab -->
            <div id="static-tab" class="tab-pane">
                <div class="instructions">
                    <h3>Static Gestures (Hands work together):</h3>
                    <div class="instruction-grid">
                        <div class="instruction-section">
                            <h4>Playback:</h4>
                            <ul>
                                <li>Both Hands Open â†’ Play/Resume</li>
                                <li>Both Hands Closed â†’ Fade to Pause</li>
                            </ul>
                        </div>
                        <div class="instruction-section">
                            <h4>Volume (Left Hand):</h4>
                            <ul>
                                <li>One Finger â†’ 25%</li>
                                <li>Two Fingers â†’ 50%</li>
                                <li>Three Fingers â†’ 75%</li>
                                <li>Four Fingers â†’ 100%</li>
                            </ul>
                        </div>
                        <div class="instruction-section">
                            <h4>Speed (Right Hand):</h4>
                            <ul>
                                <li>One Finger â†’ 0.50x</li>
                                <li>Two Fingers â†’ 0.75x</li>
                                <li>Three Fingers â†’ 1.00x</li>
                                <li>Four Fingers â†’ 1.50x</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hidden File Input -->
        <input type="file" id="file-input" accept="audio/mp3,audio/mpeg" style="display: none;">
    </div>

    <!-- Load MediaPipe -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    
    <!-- Load Application Scripts -->
    <script src="hand-tracker.js"></script>
    <script src="app.js"></script>
</body>
</html>